import java.awt.Color;
import java.awt.Component;
import java.util.Random;
 
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.SwingConstants;
import javax.swing.SwingUtilities;
import javax.swing.JLabel;

@SuppressWarnings("serial")
public class Main extends JFrame {

	public Main(){
		
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		
		//set default sizes
		int x=240, y = 135, z=1;
		
		//prompt user for program dimensions
		String str = JOptionPane.showInputDialog(this, "Length", x);
    	if(str != null) {
    		x = Integer.parseInt(str);
    	}
    	
    	//use widescreen 16:9 ratio
    	int y_widescreen = (int)((float)x*((float)9/(float)16));
    	
    	//prompt user for program dimensions
    	str = JOptionPane.showInputDialog(this, "Height", y_widescreen);
    	if(str != null) {
    		y = Integer.parseInt(str);
    	}
    	
    	//prompt user for program dimensions
    	 str = JOptionPane.showInputDialog(this, "Depth", z);
    	if(str != null) {
    		z = Integer.parseInt(str);
    	}
    	
    	//Init
		setSizes(x, y, z);
	}
	
	public void setSizes(int xSize, int ySize, int zSize) {
		
		//minimum window frame lengths
		int minMenuXLen = 340;
        int minMenuYLen = 260;
        
		//Textbox for info display
        JLabel l = new JLabel();
        
        //Performs all automata functions for the sim; 							
    	automataLib a = new automataLib(this,xSize,ySize); 
    	
    	//Array that stores the world
    	Universe u= new Universe(xSize, 	ySize,  zSize, 	a);											
    	
    	//Set Universal initial parameters
    	//This determines which automata functions to run in what order, and with which parameter values.
    	u.instructions = new int[][] {
    			//Fill out Integer instruction arrays here.
    			//{InstructionNumber, Z-layer, args[2-4]...} 
    			{0,0,1,1,1}
        };
    	
    	//Check if the window frame is large enough
    	int xxsize = (xSize+2+2) + 6 + 2 +120 + 56;
    	int yysize = (ySize+2) + 42 + 24 + 2+8;
    	
    	//resize it if needed
    	if(xSize < minMenuXLen) {if(xxsize < minMenuXLen){xxsize = minMenuXLen;}}
		if(ySize < minMenuYLen) {if(yysize < minMenuYLen){yysize = minMenuYLen;}}
		
    	//Set parameters for surface/display panel
        //        		 (	Width,	Height,		Depth,		X,		Y,	Assigned universe)
    	Surf s = new Surf(	xSize, 	ySize, 		u.zlen,		4,		4, 	u);
    	
    	//Mouselistener for user input; also controls many UI functions
    	ml myml = new ml(this,s,l,u);	

    	//MouseWheelListener for user input;
    	mwl mymwl = new mwl(this,myml);	
    	
    	//MouseMotionListener for user input;									
    	MouseMotionList mMot = new MouseMotionList(this, myml);			
    	
    	//add Menu Gui
    	jMenuMain jmen = new jMenuMain(myml);								
    	
    	//Textbox for info display
    	l.setLayout(null); 
    	l.setBounds(xSize+16, 2, 80+40, 14*(10+4));
    	l.setVisible(true);
    	l.setText("Menu");
    	
    	//Layout for Main window/frame
    	this.setLayout(null);
    	this.setSize(xxsize, yysize);
    	this.setVisible(true);
    	this.setResizable(false);
    	this.setLocation(96, 32);
    	
    	//Assemble the components
    	this.add(l);
    	this.add(s);
    	
    	//Configure initial state
    	jmen.setGUI(this);
    	
    	//show menu on start
    	myml.updateListing(); 	
    	
    	//Steps a frame so the universe is visible, unpauses
    	myml.toggleStart(); 
    	
    	//second toggle re-pauses
    	myml.toggleStart(); 
    	
    	//makes sure first surface is visible
    	u.runOnce(1,0);
    	
    	//inital seed
    	u.runOnce(myml.seedRand,myml.seedVal);
    	    	
    	//update screen
    	myml.refresh();
  
    	
	}
	
	
	
	public static void main(String[] args) {
		
        SwingUtilities.invokeLater(new Runnable() { 
            @Override
            public void run() { //breaks program's static dependance
            	new Main(); //Main window/frame
            }
        });
    }
    
	
	
}










